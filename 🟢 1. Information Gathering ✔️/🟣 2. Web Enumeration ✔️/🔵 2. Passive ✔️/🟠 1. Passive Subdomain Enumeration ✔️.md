# Cheatsheet

| Stuff we can do                                                                                                                                                                 | Why do it?                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| Go through SSL certificates on main target site                                                                                                                                 | Low hanging fruit, may have subdomains                                     |
| Go through crt.sh                                                                                                                                                               | Find subdomains                                                            |
| Run host command                                                                                                                                                                | Find IPs and subdomains                                                    |
| Run Shodan                                                                                                                                                                      | Find additional information                                                |
| Commands                                                                                                                                                                        |                                                                            |
| `curl -s https://crt.sh/\?q\=target.com\&output\=json \| jq .`                                                                                                                  | Finds subdomains from crt.sh                                               |
| `curl -s https://crt.sh/\?q\=inlanefreight.com\&output\=json \| jq . \| grep name \| cut -d":" -f2 \| grep -v "CN=" \| cut -d'"' -f2 \| awk '{gsub(/\\n/,"\n");}1;' \| sort -u` | Find subdomains from crt.sh and filter out the unique ones                 |
| `for i in $(cat subdomainlist);do host $i \| grep "has address" \| grep target.com \| cut -d" " -f1,4;done`                                                                     | run `host` command of subdomains to find IP addresses and more information |
| `for i in $(cat subdomainlist);do host $i \| grep "has address" \| grep target.com \| cut -d" " -f4 >> ip-addresses.txt;done`                                                   | just filtering out IPs from previous command                               |
| `for i in $(cat ip-addresses.txt);do shodan host $i;done`                                                                                                                       | Running shodan on said IPs                                                 |
| `dig any target.com`                                                                                                                                                            | Find DNS records                                                           |
# Overview

Here we are trying to find subdomains without interactive with the target
# Knowledge Base

### 1. crt.sh populates its SSL certificate database by monitoring Certificate Transparency (CT) logs, which publicly log all issued SSL/TLS certificates. Certificate Authorities voluntarily publish these logs.

| Tool                                | Key Features                                                                                                     | Use Cases                                                                                                 | Pros                                              | Cons                                         |
| ----------------------------------- | ---------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------------- | -------------------------------------------- |
| [crt.sh](https://crt.sh/)           | User-friendly web interface, simple search by domain, displays certificate details, SAN entries.                 | Quick and easy searches, identifying subdomains, checking certificate issuance history.                   | Free, easy to use, no registration required.      | Limited filtering and analysis options.      |
| [Censys](https://search.censys.io/) | Powerful search engine for internet-connected devices, advanced filtering by domain, IP, certificate attributes. | In-depth analysis of certificates, identifying misconfigurations, finding related certificates and hosts. | Extensive data and filtering options, API access. | Requires registration (free tier available). |
### 2. `host` command does DNS lookups for infomation like `dig` but with limited output
### 3. Shodan is a search engine that scans and indexes internet-connected devices and services, allowing users to discover exposed systems and vulnerabilities. 
### 4. `dig` digs out DNS records and does more stuff. Will cover DNS records when we do zone transfers in [[ðŸŸ  1. Web Server Enumerationâœ”ï¸]] / of footprinting [[ðŸŸ¢ 1. Information Gathering âœ”ï¸/ðŸŸ£ 1. Service Enumeration âœ”ï¸/ðŸ”µ 1. Services âœ”ï¸/ðŸŸ  4. DNS (53)âœ”ï¸/ðŸŸ  4. DNS (53)âœ”ï¸|ðŸŸ  4. DNS (53)âœ”ï¸]]

## âš ï¸ Tool Output Gotchas (Applicable mostly on IRL pentests and not cert exams I am hoping)

- `crt.sh` will sometimes include *wildcard* subdomains like `*.example.com` - filter carefully.
- `host` and `dig` may return **cached or outdated records** - verify before relying.
- Shodan API has limits unless authenticated. Use CLI with API key for better data.

There are two popular options for searching CT logs:

| Tool                                | Key Features                                                                                                     | Use Cases                                                                                                 | Pros                                              | Cons                                         |
| ----------------------------------- | ---------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------------- | -------------------------------------------- |
| [crt.sh](https://crt.sh/)           | User-friendly web interface, simple search by domain, displays certificate details, SAN entries.                 | Quick and easy searches, identifying subdomains, checking certificate issuance history.                   | Free, easy to use, no registration required.      | Limited filtering and analysis options.      |
| [Censys](https://search.censys.io/) | Powerful search engine for internet-connected devices, advanced filtering by domain, IP, certificate attributes. | In-depth analysis of certificates, identifying misconfigurations, finding related certificates and hosts. | Extensive data and filtering options, API access. | Requires registration (free tier available). |
``` 
curl -s "https://crt.sh/?q=facebook.com&output=json" | jq -r '.[] | select(.name_value | contains("dev")) | .name_value' | sort -u
```
# Tags

> #Web-Enum #Recon #Information-gathering #Passive