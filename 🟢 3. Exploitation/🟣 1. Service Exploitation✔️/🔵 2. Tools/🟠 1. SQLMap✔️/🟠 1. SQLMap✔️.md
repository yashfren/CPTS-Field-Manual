https://www.zwarts-sec.com/posts/Hack-The-Box-SQLMap-Essentials/#skills-assessment
## Basic Usage

```bash
sqlmap -u "http://www.example.com/vuln.php?id=1" --batch
```

The option '-u' is used to provide the target URL, while the switch '--batch' is used for skipping any required user-input, by automatically choosing using the default option.
## SQLMap Logs

SQLMap provides detailed logs during scans. These messages help identify SQLi types, confirm vulnerabilities, and assist in reporting or manual exploitation.
#### Common Log Messages

- "target URL content is stable"    
    - The server responds consistently. Easier to spot differences during testing.
- "GET parameter 'id' appears to be dynamic"
    - Changing parameter values causes response changes—indicates DB interaction.
- "parameter 'id' might be injectable (possible DBMS: 'MySQL')"   
    - Initial heuristic indicates a possible injection point and DBMS guess.
- "parameter might be vulnerable to XSS"
    - Heuristic check suggests potential XSS in parameter.
- "it looks like the back-end DBMS is 'MySQL'"
    - SQLMap proposes to focus payloads on a specific DBMS for accuracy.
- "include all tests for 'MySQL' extending provided level and risk values"
    - Extends testing range for the detected DBMS.
- "reflective value(s) found and filtering out"
    - Parts of payload appear in the response. SQLMap filters them out.
- "parameter appears to be 'AND boolean-based blind' injectable"
    - Confirms boolean-based SQLi. Uses `--string="constant"` to identify TRUE responses.
- "time-based comparison requires a larger statistical model"
    - SQLMap collects response time stats to confirm time-based blind SQLi.
- "extending ranges for UNION query injection technique tests"
    - Another SQLi method detected, so UNION test range is increased.
- "ORDER BY technique appears to be usable"
    - Speeds up column count detection in UNION-based SQLi.
- "parameter 'id' is vulnerable. Do you want to keep testing others?"
    - Confirms vulnerability. Option to continue testing other params.
- "sqlmap identified the following injection point(s)"
    - Lists all provable injection points with types and payloads.
- "fetched data logged to text files under '~/.sqlmap/output/...'"
    - Data and logs are saved for the target. Useful for later review.
## Running SQLMap on HTTP Requests

SQLMap can run directly on crafted HTTP requests, allowing flexible and powerful testing of SQL injection vulnerabilities. This is useful for testing GET, POST, cookie-based, or custom request types.
### Using curl-style Input

**Workflow:**

- Use browser Developer Tools → Network tab → Right-click → _Copy as cURL_    
- Paste the command, replacing `curl` with `sqlmap`

**Example:**

```bash
sqlmap 'http://www.example.com/?id=1' -H 'User-Agent: Mozilla/5.0 ...' --compressed
```
### GET/POST Parameters

**GET Example:**

```bash
sqlmap -u 'http://www.example.com/?id=1'
```

**POST Example:**

```bash
sqlmap 'http://www.example.com/' --data 'uid=1&name=test'
```

To mark a specific parameter:

```bash
sqlmap 'http://www.example.com/' --data 'uid=1*&name=test'
```
### Full HTTP Requests with -r

Use `-r` to load a full HTTP request captured via Burp or browser:

```bash
sqlmap -r req.txt
```

**Mark injectable parameter in file:**

```
GET /?id=* HTTP/1.1
```
### Custom Options

**Set cookie value:**

```bash
sqlmap --cookie='PHPSESSID=abcd1234'
```

**Or using -H:**

```bash
sqlmap -H 'Cookie: PHPSESSID=abcd1234'
```

**Randomize user agent:**

```bash
sqlmap --random-agent
```

**Specify HTTP method (e.g., PUT):**

```bash
sqlmap -u www.target.com --data='id=1' --method PUT
```
### JSON/XML Support

SQLMap supports complex POST bodies:

**Example JSON request in file:**

```json
{
  "data": [{
    "type": "articles",
    "id": "1",
    "attributes": {
      "title": "Example JSON"
    }
  }]
}
```

Run:

```bash
sqlmap -r req.txt
```

SQLMap will ask:

```
JSON data found in HTTP body. Do you want to process it? [Y/n/q]
```
### Summary

- Use `-u` or `--data` for simple GET/POST   
- Use `-r` for full HTTP requests
- Use `--cookie`, `--method`, `--random-agent`, `--mobile` as needed
- SQLMap supports form, JSON, and XML data structures

Mark parameters explicitly with `*` if auto-detection fails
## Handling SQLMap Errors

SQLMap may show errors during execution. Here’s how to debug effectively:

#### 1. Display DBMS Errors with `--parse-errors`

```bash
sqlmap -u "http://target.com/index.php?id=1" --parse-errors
```

This option reveals detailed SQL syntax or server errors found in responses.

#### 2. Store Full HTTP Traffic with `-t`

```bash
sqlmap -u "http://target.com/vuln.php?id=1" --batch -t /tmp/traffic.txt
cat /tmp/traffic.txt
```

This saves HTTP requests/responses, useful for manual inspection.

#### 3. Verbose Output with `-v`

```bash
sqlmap -u "http://target.com/vuln.php?id=1" -v 6 --batch
```

Levels range from 0 (quiet) to 6 (full debug). Level 6 shows HTTP traffic and SQLMap decisions in detail.

#### 4. Use Burp with `--proxy`

```bash
sqlmap -u "http://target.com/vuln.php?id=1" --proxy="http://127.0.0.1:8080"
```

This lets you route SQLMap traffic through Burp Suite for advanced request analysis and testing.

These techniques help troubleshoot why a scan fails or confirm what payloads are being used and how the target reacts.
# Tags
> #Exploitation #Service-Exploitation #MySQL #SQLmap #SQL-injection