# BASICS
#### SQL Default Databases
`MySQL` default system schemas/databases:

- `mysql` - is the system database that contains tables that store information required by the MySQL server
- `information_schema` - provides access to database metadata
- `performance_schema` - is a feature for monitoring MySQL Server execution at a low level
- `sys` - a set of objects that helps DBAs and developers interpret data collected by the Performance Schema
#### Show Databases

```bash
mysql> SHOW DATABASES;

+--------------------+
| Database           |
+--------------------+
| information_schema |
| htbusers           |
+--------------------+
2 rows in set (0.00 sec)
```
#### Show Tables

```bash
mysql> SHOW TABLES;

+----------------------------+
| Tables_in_htbusers         |
+----------------------------+
| actions                    |
| permissions                |
| permissions_roles          |
| permissions_users          |
| roles                      |
| roles_users                |
| settings                   |
| users                      |
+----------------------------+
8 rows in set (0.00 sec)
```
#### Select all Data from Table "users"

```bash
mysql> SELECT * FROM users;

+----+---------------+------------+---------------------+
| id | username      | password   | date_of_joining     |
+----+---------------+------------+---------------------+
|  1 | admin         | p@ssw0rd   | 2020-07-02 00:00:00 |
|  2 | administrator | adm1n_p@ss | 2020-07-02 11:30:50 |
|  3 | john          | john123!   | 2020-07-02 11:47:16 |
|  4 | tom           | tom123!    | 2020-07-02 12:23:16 |
+----+---------------+------------+---------------------+
4 rows in set (0.00 sec)
```
# SSL ERROR FIX

```
┌──(apu㉿frenbook)-[~/SQLIundSQLMAP]
└─$ mysql -u root -h 94.237.120.195 -P 59226 -ppassword --ssl-mode=DISABLED
mysql: unknown variable 'ssl-mode=DISABLED'                                                                                
┌──(apu㉿frenbook)-[~/SQLIundSQLMAP]
└─$ mysql -u root -ppassword -h 94.237.120.195 -P 59226 --ssl=0
```

# Queries
### Creating a database

```SQl
mysql> CREATE DATABASE users;
```
### USE keyword

-> database name is case sensitive

```SQL
mysql> SHOW DATABASES;

+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
| users              |
+--------------------+

mysql> USE users;

Database changed
```
### Tables
#### Create

```SQL
CREATE TABLE logins (
    id INT,
    username VARCHAR(100),
    password VARCHAR(100),
    date_of_joining DATETIME
    );
```

```SQL
mysql> CREATE TABLE logins (
    ->     id INT,
    ->     username VARCHAR(100),
    ->     password VARCHAR(100),
    ->     date_of_joining DATETIME
    ->     );
Query OK, 0 rows affected (0.03 sec)
```
#### SHOW

```SQL
mysql> SHOW TABLES;

+-----------------+
| Tables_in_users |
+-----------------+
| logins          |
+-----------------+
1 row in set (0.00 sec)
```
#### DESCRIBE

```SQL
mysql> DESCRIBE logins;

+-----------------+--------------+
| Field           | Type         |
+-----------------+--------------+
| id              | int          |
| username        | varchar(100) |
| password        | varchar(100) |
| date_of_joining | date         |
+-----------------+--------------+
4 rows in set (0.00 sec)
```
### Table Properties & Constraints

- AUTO_INCREMENT: Automatically increments numeric value (usually for primary key).

```sql
id INT NOT NULL AUTO_INCREMENT,
```

- NOT NULL: Field cannot be left empty (required). 

```sql
username VARCHAR(100) NOT NULL,
```

- UNIQUE: Ensures all values are unique (e.g., usernames).

```sql
username VARCHAR(100) UNIQUE NOT NULL,
```

- DEFAULT: Specifies default value if none provided.

```sql
date_of_joining DATETIME DEFAULT NOW(),
```

- PRIMARY KEY: Uniquely identifies each record in a table.

```sql
PRIMARY KEY (id)
```
### Final Version of `CREATE TABLE`

```sql
CREATE TABLE logins (
    id INT NOT NULL AUTO_INCREMENT,
    username VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    date_of_joining DATETIME DEFAULT NOW(),
    PRIMARY KEY (id)
);
```

#  MySQL SQL Statements 
#### INSERT Statement

```sql
INSERT INTO table_name VALUES (column1_value, column2_value, column3_value, ...);
```

- Adds a new record to the table.
- All columns must be provided unless some have default values.
###### Example:

```sql
INSERT INTO logins VALUES(1, 'admin', 'p@ssw0rd', '2020-07-02');
```
###### Selective Insert:

```sql
INSERT INTO logins(username, password) VALUES('administrator', 'adm1n_p@ss');
```
###### Multiple Records:

```sql
INSERT INTO logins(username, password) VALUES ('john', 'john123!'), ('tom', 'tom123!');
```

> ⚠️ Passwords should be hashed/encrypted before storing.
#### SELECT Statement

```sql
SELECT * FROM table_name;
```

- Fetches all rows and columns.

```sql
SELECT column1, column2 FROM table_name;
```

- Fetches specific columns.

Example:

```sql
SELECT * FROM logins;
```

```sql
SELECT username, password FROM logins;
```
#### DROP Statement

```sql
DROP TABLE table_name;
```

- Deletes the table and all its data permanently.

Example:

```sql
DROP TABLE logins;
```

> ⚠️ No confirmation. Use with caution.

#### ALTER Statement

- Add Column:

```sql
ALTER TABLE logins ADD newColumn INT;
```

- Rename Column:

```sql
ALTER TABLE logins RENAME COLUMN newColumn TO newerColumn;
```

- Modify Column Type:

```sql
ALTER TABLE logins MODIFY newerColumn DATE;
```

- Drop Column:

```sql
ALTER TABLE logins DROP newerColumn;
```
#### UPDATE Statement

```sql
UPDATE table_name SET column1=newvalue1, column2=newvalue2, ... WHERE <condition>;
```

- Updates specific rows matching the condition.  

Example:

```sql
UPDATE logins SET password = 'change_password' WHERE id > 1;
```

View Updated Table:

```sql
SELECT * FROM logins;
```
# Query Results in MySQL
### Sorting Results

To sort query output, we use `ORDER BY`:

```sql
SELECT * FROM logins ORDER BY password;
```

- Sorts records in ascending order by default.
- To reverse the sort:

```sql
SELECT * FROM logins ORDER BY password DESC;
```

- Sort by multiple columns:

```sql
SELECT * FROM logins ORDER BY password DESC, id ASC;
```
### LIMIT Clause

Use `LIMIT` to restrict the number of records returned:

```sql
SELECT * FROM logins LIMIT 2;
```

- Adds an **offset** with this syntax:   

```sql
SELECT * FROM logins LIMIT 1, 2;
```

- Starts from the second record (offset 1) and returns 2 rows.
### WHERE Clause

Used to filter records based on a condition:

```sql
SELECT * FROM logins WHERE id > 1;
```

- Filters rows where `id` is greater than 1.   
- Another example:

```sql
SELECT * FROM logins WHERE username = 'admin';
```

- Strings and dates must be quoted.
- Numbers can be used directly.
### LIKE Clause

Used for pattern matching with wildcards:

```sql
SELECT * FROM logins WHERE username LIKE 'admin%';
```

- `%` matches zero or more characters.    
- Example matching usernames with exactly three characters:

```sql
SELECT * FROM logins WHERE username LIKE '___';
```

- `_` matches exactly one character.
# SQL Operators in MySQL
### AND Operator

Combines two conditions and returns true only if **both** are true.

```sql
SELECT 1 = 1 AND 'test' = 'test';  -- returns 1 (true)
SELECT 1 = 1 AND 'test' = 'abc';   -- returns 0 (false)
```
### OR Operator

Returns true if **at least one** of the conditions is true.

```sql
SELECT 1 = 1 OR 'test' = 'abc';    -- returns 1 (true)
SELECT 1 = 2 OR 'test' = 'abc';    -- returns 0 (false)
```
### NOT Operator

Inverts a boolean condition.

```sql
SELECT NOT 1 = 1;   -- returns 0 (false)
SELECT NOT 1 = 2;   -- returns 1 (true)
```
### Symbolic Operators

Logical operators can also be written using symbols:

- `AND` = `&&`
- `OR` = `||`
- `NOT` = `!`    

```sql
SELECT 1 = 1 && 'test' = 'abc';   -- returns 0
SELECT 1 = 1 || 'test' = 'abc';   -- returns 1
SELECT 1 != 1;                    -- returns 0
```
### Operators in Queries

```sql
SELECT * FROM logins WHERE username != 'john';
```

- Filters out record where username is john.

```sql
SELECT * FROM logins WHERE username != 'john' AND id > 1;
```

- Filters out john AND only shows rows where id > 1.
### Operator Precedence

When using multiple operators, MySQL follows precedence rules to evaluate them:

1. Division (/), Multiplication (*), Modulus (%)
2. Addition (+), Subtraction (-)
3. Comparisons (=, >, <, <=, >=, !=, LIKE)
4. NOT (!)
5. AND (&&)
6. OR (||)    

Operations are evaluated **top to bottom**.

**Example:**

```sql
SELECT * FROM logins WHERE username != 'tom' AND id > 3 - 2;
```

- Subtraction (3 - 2) evaluated first → becomes:

```sql
SELECT * FROM logins WHERE username != 'tom' AND id > 1;
```

- Then comparison and logical AND applied.

Only records where username is not 'tom' **and** id > 1 will be returned.
# Tags
> #Exploitation #Service-Exploitation #MySQL