## File Upload – Client-Side Validation Bypass
### Summary
- ###### Many web apps use **JavaScript-based client-side validation** to restrict file uploads.
- ###### These validations can be bypassed since they don’t enforce any rule on the server side.
### Bypass Techniques
#### 1. Modify Upload Request (Burp Suite)
- ###### Capture image upload request to `/upload.php`.
- ###### Modify:
   - ###### `filename="HTB.png"` → `shell.php`
   - ###### File body → replace with PHP shell
- ###### If no backend validation: upload succeeds, file executes:

```
http://SERVER/profile_images/shell.php?cmd=id
```
#### 2. Disable JavaScript Validation (Browser Dev Tools)
- ###### Use [CTRL+SHIFT+C] to inspect upload `<input>` element:

```html
<input type="file" name="uploadFile" id="uploadFile" onchange="checkFile(this)" accept=".jpg,.jpeg,.png">
```

- ###### Delete:
    - ###### `onchange="checkFile(this)"`
    - ###### Optionally `accept=".jpg,.jpeg,.png"`
- ###### JS function responsible:

```javascript
function checkFile(File) {
  if (extension !== 'jpg' && extension !== 'jpeg' && extension !== 'png') {
    $('#error_message').text("Only images are allowed!");
    File.form.reset();
    $("#submit").attr("disabled", true);
  }
}
```

- ###### Removes upload button disabling. PHP file can now be selected and uploaded.
### Post-Upload Verification

- ###### After upload, use Page Inspector to check:

```html
<img src="/profile_images/shell.php" class="profile-image">
```

- ###### Visit:  `http://SERVER/profile_images/shell.php?cmd=id` to execute code
# Tags
>  #Web-Exploitation #Exploitation #File-Upload-Attacks