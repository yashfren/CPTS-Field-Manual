# Users & Groups Enumeration

During Windows post-exploitation, enumerating users and groups is critical to:

- Understand privilege relationships    
- Identify potential targets for impersonation
- Plan lateral movement
- Detect misconfigurations or attack paths (e.g., excessive group memberships, abandoned accounts)

This note focuses on local user/group enumeration, not domain-level (which is handled elsewhere).
## 1. Enumerating Local Users

### Using CMD

```cmd
net user
```

Displays all local users on the system.

```cmd
net user <username>
```

Shows details like group memberships, last set password, account expiration.
### Using PowerShell

```powershell
Get-LocalUser
```

```powershell
Get-LocalUser | Select Name,Enabled,LastLogon
```
## 2. Enumerating Local Groups

### CMD

```cmd
net localgroup
```

Lists all local groups.

```cmd
net localgroup <GroupName>
```

Shows all members of that group.
### PowerShell

```powershell
Get-LocalGroup
```

```powershell
Get-LocalGroupMember -Group "Administrators"
```
## 3. Interesting Groups to Investigate

|Group|Description|
|---|---|
|Administrators|Full control over the system|
|Remote Desktop Users|RDP access enabled|
|Backup Operators|Can read _any_ file regardless of ACL|
|Power Users|Legacy group; sometimes overly privileged|
|Hyper-V Admins|Can control and extract from VMs|
|Users|Default group for all standard users|
|Guests|Rarely used, often disabled, but sometimes misconfigured|
## 4. User Enumeration via `whoami`

Get current user:

```cmd
whoami
```

Detailed group info:

```cmd
whoami /groups
```
## 5. User SID Enumeration

```powershell
Get-WmiObject win32_useraccount
```

This lists user accounts with their full SIDs. Useful when targeting `runas`, scheduled tasks, or registry permissions.
## 6. Checking Logged-In Users

```cmd
query user
```

```powershell
Get-WmiObject -Class Win32_LoggedOnUser
```
## 7. Check Home Directories

Review `C:\Users\` to identify:

- Possible inactive or admin accounts    
- Files owned by other users
- Saved credentials, tokens, or secrets

```powershell
Get-ChildItem C:\Users\
```
## Practical Use Cases

- Find dormant or service accounts with admin rights
- Identify shared or reused accounts
- Enumerate which users are part of `Administrators`, `Remote Desktop Users`, or `Backup Operators` for privilege escalation planning
